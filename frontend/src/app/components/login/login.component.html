<div id="wholePage">
  <div id="loginCard">
    <div id="cardHeader">
      <h1 id="title">
        {{
          (dialogMode === "login" ? "login.title" : "register.title")
            | translate
        }}
      </h1>
      <p id="subtitle">
        {{
          (dialogMode === "login" ? "login.subtitle" : "register.subtitle")
            | translate
        }}
      </p>
    </div>

    @if (errorMessage()) {
      <div class="error-banner">
        <div class="error-icon">⚠</div>
        <span class="error-text">{{ errorMessage() | translate }}</span>
      </div>
    }

    <form [formGroup]="form" id="loginForm">
      @if (dialogMode === "register") {
        <div class="form-field">
          <label class="field-label" for="name">
            {{ "login.form.name" | translate }}
          </label>
          <input
            id="name"
            type="text"
            class="field-input"
            [class.error]="hasFieldError('name')"
            [formControl]="form.controls.name"
            [placeholder]="'login.form.namePlaceholder' | translate"
          />
          @if (hasFieldError("name")) {
            <div class="field-error">
              <span class="error-icon">⚠</span>
              {{ getFieldError("name") | translate }}
            </div>
          }
        </div>
      }

      <div class="form-field">
        <label class="field-label" for="email">
          {{ "login.form.email" | translate }}
        </label>
        <input
          id="email"
          type="email"
          class="field-input"
          [class.error]="hasFieldError('email')"
          [formControl]="form.controls.email"
          [placeholder]="'login.form.emailPlaceholder' | translate"
        />
        @if (hasFieldError("email")) {
          <div class="field-error">
            <span class="error-icon">⚠</span>
            {{ getFieldError("email") | translate }}
          </div>
        }
      </div>

      <div class="form-field">
        <label class="field-label" for="password">
          {{ "login.form.password" | translate }}
        </label>
        <input
          id="password"
          type="password"
          class="field-input"
          [class.error]="hasFieldError('password')"
          [formControl]="form.controls.password"
          [placeholder]="'login.form.passwordPlaceholder' | translate"
        />
        @if (hasFieldError("password")) {
          <div class="field-error">
            <span class="error-icon">⚠</span>
            {{ getFieldError("password") | translate }}
          </div>
        }
      </div>

      @if (dialogMode === "register") {
        <div class="form-field">
          <label class="field-label" for="confirmPassword">
            {{ "login.form.confirmPassword" | translate }}
          </label>
          <input
            id="confirmPassword"
            type="password"
            class="field-input"
            [class.error]="hasFieldError('confirmPassword')"
            [formControl]="form.controls.confirmPassword"
            [placeholder]="'login.form.confirmPasswordPlaceholder' | translate"
          />
          @if (hasFieldError("confirmPassword")) {
            <div class="field-error">
              <span class="error-icon">⚠</span>
              {{ getFieldError("confirmPassword") | translate }}
            </div>
          }
        </div>
      }

      <div id="actionButtons">
        <button
          type="submit"
          class="primary-button"
          [class.loading]="isLoading()"
          [disabled]="isLoading()"
          (click)="submit()"
        >
          @if (isLoading()) {
            <span class="loading-spinner"></span>
          }
          <span>{{
            (dialogMode === "login"
              ? "login.form.submitLogin"
              : "register.submitRegister"
            ) | translate
          }}</span>
        </button>

        <button
          type="button"
          class="secondary-button"
          [disabled]="isLoading()"
          (click)="toggleMode()"
        >
          <span>{{
            (dialogMode === "login"
              ? "login.form.noAccount"
              : "register.alreadyHaveAnAccount"
            ) | translate
          }}</span>
        </button>
      </div>
    </form>
  </div>
</div>
